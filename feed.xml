<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <title>MyRealBook</title>
    <link href="https://myrealbook.vintherine.org/feed.xml" rel="self" />
    <link href="https://myrealbook.vintherine.org" />
    <updated>2022-07-08T08:04:18+02:00</updated>
    <author>
        <name>Vincent</name>
    </author>
    <id>https://myrealbook.vintherine.org</id>

    <entry>
        <title>Marques de repÃ¨res et de reprises (Rehearsal Marks)</title>
        <author>
            <name>Vincent</name>
        </author>
        <link href="https://myrealbook.vintherine.org/double-marks.html"/>
        <id>https://myrealbook.vintherine.org/double-marks.html</id>

        <updated>2022-07-08T08:04:18+02:00</updated>
            <summary>
                <![CDATA[
                    <p>C'est ce qu'on appelle un marronnier (sujet qui revient rÃ©guliÃ¨rement) : comment gÃ©rer les marques de repÃ¨res et de reprises (reheasal marks), leurs positions verticales et horizontales, comment les faire apparaÃ®tre en fin de ligne, comment mettre deux marques successivement... Le besoin le plus frÃ©quemment exprimÃ© est une ligne se terminant par un "D.C. al Coda", la suivante commenÃ§ant par la Coda en question.Â </p>
<figure class="post__image align-center"><img loading="lazy"  src="https://myrealbook.vintherine.org/media/posts/18/DCalCoda.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://myrealbook.vintherine.org/media/posts/18/responsive/DCalCoda-xs.png 300w ,https://myrealbook.vintherine.org/media/posts/18/responsive/DCalCoda-sm.png 480w ,https://myrealbook.vintherine.org/media/posts/18/responsive/DCalCoda-md.png 768w"  alt="" width="501" height="184"></figure>
<p>Voici un petit tour de mes modestes connaissancesÂ  :</p>
<ul>
<li><a href="#mark">la commande \mark et ses (nombreux) \override</a></li>
<li><a href="#double">Double-Mark : deux marques Ã  un saut de ligne</a></li>
<li><a href="#poly">PolyMark, un graveur alternatif</a></li>
</ul>

                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                <p>C'est ce qu'on appelle un marronnier (sujet qui revient rÃ©guliÃ¨rement) : comment gÃ©rer les marques de repÃ¨res et de reprises (reheasal marks), leurs positions verticales et horizontales, comment les faire apparaÃ®tre en fin de ligne, comment mettre deux marques successivement... Le besoin le plus frÃ©quemment exprimÃ© est une ligne se terminant par un "D.C. al Coda", la suivante commenÃ§ant par la Coda en question.Â </p>
<figure class="post__image align-center"><img loading="lazy"  src="https://myrealbook.vintherine.org/media/posts/18/DCalCoda.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://myrealbook.vintherine.org/media/posts/18/responsive/DCalCoda-xs.png 300w ,https://myrealbook.vintherine.org/media/posts/18/responsive/DCalCoda-sm.png 480w ,https://myrealbook.vintherine.org/media/posts/18/responsive/DCalCoda-md.png 768w"  alt="" width="501" height="184"></figure>
<p>Voici un petit tour de mes modestes connaissancesÂ  :</p>
<ul>
<li><a href="#mark">la commande \mark et ses (nombreux) \override</a></li>
<li><a href="#double">Double-Mark : deux marques Ã  un saut de ligne</a></li>
<li><a href="#poly">PolyMark, un graveur alternatif</a></li>
</ul>

<h3 id="mark">La commande \mark et ses (nombreux) \override</h3>
<p>CommenÃ§ons par le commencement : une marque de repÃ¨re s'obtient par la commande <code>\mark</code>Â Voici ce qu'en dit la <a href="https://lilypond.org/doc/v2.22/Documentation/notation/writing-text#text-marks">documentation</a> :</p>
<p class="msg msg--highlight ">Le rÃ©sultat de <code>\mark</code> nâ€™apparaÃ®tra que sur la portÃ©e supÃ©rieure dâ€™un systÃ¨me. Si vous introduisez la commande <code>\mark</code> au moment dâ€™une barre de mesure, la marque se placera au-dessus de la barre. Si vous y faites appel au milieu dâ€™une mesure, cette marque sera positionnÃ©e entre les notes. Si elle intervient en dÃ©but de ligne, elle sera placÃ©e juste avant la premiÃ¨re note de cette portÃ©e. Enfin, une marque qui tomberait sur un saut de ligne sera imprimÃ©e au dÃ©but de la ligne suivante.Â </p>
<p>Ce qui n'est pas prÃ©cisÃ©ment explicitÃ© c'est que sauf dispositif complÃ©mentaire Â il n'est pas possible de placer plus d'une marque au mÃªme endroit.</p>
<p>Il est possible par des <code>\override</code> de modifier les comportements par dÃ©faut</p>
<ul>
<li>Direction (haut / bas)
<ul>
<li>Haut (dÃ©faut)Â  : <code>[\once] \override Score.RehearsalMark #'direction = #UP</code></li>
<li>BasÂ  :Â  <code>[\once] \override Score.RehearsalMark #'direction = #DOWN</code></li>
</ul>
</li>
<li>Alignement (gauche / centre / droit)
<ul>
<li>Gaughe : <code>[\once] \override Score.RehearsalMark #'self-alignment-X = #LEFT</code></li>
<li>Centre (dÃ©faut) : <code>[\once] \override Score.RehearsalMark #'self-alignment-X = #CENTER</code></li>
<li>Droit : Â <code>[\once] \override Score.RehearsalMark #'self-alignment-X = #RIGHT</code></li>
</ul>
</li>
<li>Fin de ligne
<ul>
<li><code>\once \override Score.RehearsalMark.break-visibility = #end-of-line-visible</code></li>
</ul>
</li>
</ul>
<figure class="post__image align-center"><img loading="lazy"  src="https://myrealbook.vintherine.org/media/posts/18/Directions.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://myrealbook.vintherine.org/media/posts/18/responsive/Directions-xs.png 300w ,https://myrealbook.vintherine.org/media/posts/18/responsive/Directions-sm.png 480w ,https://myrealbook.vintherine.org/media/posts/18/responsive/Directions-md.png 768w"  alt="" width="546" height="260"></figure>
<p>Si lâ€™alignement se fait par dÃ©faut sur la barre de mesure il est possible de choisirÂ  un autre objet tel que clef, armure, mÃ©trique, respiration...</p>
<p>Par exemple :Â </p>
<ul>
<li><code>[\once] override Score.RehearsalMark.break-align-symbols = #'(clef)</code></li>
<li><code>[\once]Â \override Score.RehearsalMark.break-align-symbols = #'(time-signature)</code></li>
</ul>
<p>extrait de la Â <a href="http://lilypond.org/doc/v2.22/Documentation/notation/aligning-objects#using-the-break_002dalignable_002dinterface">documentation </a> :Â </p>
<p class="msg msg--highlight ">Les diffÃ©rents objets sur lesquels lâ€™alignement pourrait intervenir seront regroupÃ©s dans une liste. Si lâ€™un des objets est invisible Ã  lâ€™endroit voulu, en raison dâ€™un rÃ©glage de <code>break-visibility</code> ou bien par forÃ§age de la visibilitÃ© des armures et clefs, le repÃ¨re ou le numÃ©ro de mesure viendra sâ€™aligner sur le premier Ã©lÃ©ment de cette liste qui soit visible. Dans le cas oÃ¹ aucun objet de la liste nâ€™est visible, lâ€™alignement se fera sur la barre de mesure ou, dans le cas oÃ¹ la barre de mesure est invisible, Ã  lâ€™endroit mÃªme oÃ¹ la barre prendrait place.Â </p>
<p>Enfin la propriÃ©tÃ© <code>extra-offset</code> offre la possibilitÃ© de contrÃ´ler entiÃ¨rement le placement dâ€™un objet, aussi bien horizontalement que verticalement. :</p>
<ul>
<li>[<code>\once] \override Score.RehearsalMark.extra-offset = #'(X . Y)</code></li>
</ul>
<p>X et Y sont des nombres dÃ©cimaux permettant de dÃ©placer vers la droite / vers le haut s'ils sont positifs, vers la gauche / vers le bas s'ils sont nÃ©gatif.</p>
<h3 id="double">Double-Mark : deux marques Ã  un saut de ligne</h3>
<p>Double-Mark est une fonction Ã©crite par ArnoldTheresius pour gÃ©rer spÃ©cifiquement deux marques successives lors d'un saut de lignes (l'une avant l'autre aprÃ¨s).Â  Elle est disponible sur <a href="https://lsr.di.unimi.it/LSR/Item?id=977">cette page de lsr</a> (un clic sur l'image affiche le code). Enregistrez-la dans un fichier Ã  inclure. Sa syntaxe :</p>
<pre><code>\doubleMark</code><br><code>Â  Â texte ou \markup</code><br><code>Â  Â texte ou \markup</code></pre>
<p>La marque avant le saut de ligne sera alignÃ©e Ã  droite, celle aprÃ¨s le saut de ligne Ã  gauche et toutes deux seront positionnÃ©es par dÃ©faut au dessus du systÃ¨me de portÃ©es. Il est possible de modifier la direction haut / basÂ  par un appel prÃ©alable Ã  une fonction complÃ©mentaire <code>\set_mark-y-dir</code> que l'on trouve sur la mÃªme page.</p>
<p class="msg msg--success"><strong>PrÃ©alable</strong> : \set_mark-y-dir fonctionne parfaitement (lilypond 2.22.2) si ce n'est que Frescobaldi lisant quelque-chose commenÃ§ant par \setÂ  s'attend Ã  un signe Ã©gal avant l'argument et perd tous ses moyens tant en matiÃ¨re dâ€™indentation que dâ€™autocomplÃ©tion. Une maniÃ¨re simple de contourner le problÃ¨me est de rebaptiser mark-y-dir la fonction <strong>dans le fichier inclus</strong> en supprimant le set du dÃ©but. <strong>C'est sous cette forme que j'y ferai rÃ©fÃ©rence</strong>.Â </p>
<p>La commande prend en paramÃ¨tre optionnel une "alist" de paire d'arguments dont le premier est la position par rapport au point d'insertion (avant = left, aprÃ¨s = right) et le second la position verticale (au dessus = UP, au dessous = DOWN). Pour indiquer par exemple un "D.C. al coda" en dessous de la portÃ©e puis, aprÃ¨s le saut de ligne, un signe coda au dessus de la portÃ©e (image en haut de page) :</p>
<pre><code>include "double-mark.ly"<br><br>\relative c'' {
    c2 c c c \break
    \mark-y-dir #`( Â (,left . ,DOWN) (,right . ,UP) 
    \doubleMark
    \markup Â {\with-color #red "D.S. al Coda" }
    \markup { \with-color #red Â \musicglyph "scripts.varcoda" }
    c c c c \bar ".." 
}</code></pre>
<p>Ceci est assez peu intuitif puisque aprÃ¨s un saut de ligne les valeurs gauche et droite nous paraissent inversÃ©es mais on fini par s'y faire.</p>
<p class="msg msg--success"><strong>Attention</strong> :<code>\mark-y-dir</code> fait un <code>\override</code> de <code>Score.RehearsalMark.before-line-breaking</code> qui influencera sur les <code>\mark</code> suivants. Dans ce cas penser Ã  faire un <code>\revert Score.RehearsalMark.before-line-breaking</code>.</p>
<h3 id="poly">PolyMark, un graveur alternatif</h3>
<p>C'est Ã  ce mÃªme ArnoldTheresius que nous devons PolyMark qui se prÃ©sente comme un graveur alternatif Ã  \mark. On le trouve sur <a href="https://lsr.di.unimi.it/LSR/Item?id=976">cette page lsr</a>. Il semble au premier abord un peu plus complexe Ã  prendre en main mais dÃ¨s qu'on a compris son fonctionnementÂ  il ressemble fort Ã  la solution universelle.Â </p>
<p>la commande : <code>\polyMark #'identifiant [texte ou \markup]</code></p>
<p>Pour rÃ©sumer on peut mettre autant de marques Ã  un mÃªme point d'insertion pour autant qu'elle aient des mÃªmes identifiants diffÃ©rents. Pour afficher un repÃ¨reÂ  <code>\polyMark \default</code> fonctionne mais pas <span style="text-decoration: line-through;"><code>\polyMark #1</code> .</span></p>
<p>En l'absence d'indications de direction et d'alignement les valeurs par dÃ©faut sont <em>centrÃ©</em> et <em>au dessus</em>. En cas de multiples marques celles-ci seront alors empilÃ©es.</p>
<pre><code>\include "poly-mark-engraver.ly"<br><br>\relative c'' {</code><br><code>  Â  c2 c \polyMark \default</code><br><code>Â  Â  c2 c</code><br><code>Â  Â  \polyMark #'myKey "something"</code><br><code>Â  Â  \polyMark #'anotherKey \markup "something else"</code><br><code>Â  Â  c c</code><br><code>}</code></pre>
<figure class="post__image align-center"><img loading="lazy"  src="https://myrealbook.vintherine.org/media/posts/18/DoublePolyMark.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://myrealbook.vintherine.org/media/posts/18/responsive/DoublePolyMark-xs.png 300w ,https://myrealbook.vintherine.org/media/posts/18/responsive/DoublePolyMark-sm.png 480w ,https://myrealbook.vintherine.org/media/posts/18/responsive/DoublePolyMark-md.png 768w"  alt="" width="522" height="120"></figure>
<p>Il est possible d'indiquer de diffÃ©rentes maniÃ¨res directions et alignements.</p>
<p>La maniÃ¨re basique (mais pas la plus simple) :</p>
<pre><code>\include "poly-mark-engraver.ly"<br><br>\relative c'' {</code><br><code>Â  c c \polyMark #'W "Default" c c \break</code><br><code>Â  \polyMark #'(X (direction . -1) (self-alignment-X . -1.0) ) Â "New Line"</code><br><code>Â  \polyMark #'(Y (direction . -1) (self-alignment-X . 1.0) (break-visibility . #(#t #f #f))) Â "Down"</code><br><code>Â  \polyMark #'(Z (self-alignment-X . 1.0) (break-visibility . #(#t #f #f))) Â "Up"</code><br><code>Â  c c c c</code><br><code>Â  \bar ".." <br>}</code></pre>
<figure class="post__image align-center"><img loading="lazy"  src="https://myrealbook.vintherine.org/media/posts/18/PolyMarkDir1.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://myrealbook.vintherine.org/media/posts/18/responsive/PolyMarkDir1-xs.png 300w ,https://myrealbook.vintherine.org/media/posts/18/responsive/PolyMarkDir1-sm.png 480w ,https://myrealbook.vintherine.org/media/posts/18/responsive/PolyMarkDir1-md.png 768w"  alt="" width="505" height="189"></figure>
<p>En utilisant les mÃªmes<code> \tweak</code> ou <code>\override</code> qu'avec<code> \mark</code> :</p>
<pre><code>\include "poly-mark-engraver.ly"<br><br>\relative c'' {</code><br><code>Â  c2 c Â </code><br><code>Â  \polyMark #'myKey "UP"</code><br><code>Â  \tweak direction #DOWN</code><br><code>Â  \polyMark #'anotherKey \markup "DOWN"</code><br><code>Â  c c 2 c</code><br><code>Â  \once \override Score.RehearsalMark #'self-alignment-X = #RIGHT</code><br><code>Â  \once \override Score.RehearsalMark.break-visibility = #end-of-line-visible</code><br><code>Â  \polyMark #'EOF "End of Line"</code><br><code>Â  \bar ".."Â </code><br><code>}</code></pre>
<p class="msg msg--success">N.B. voir sur cette page la diffÃ©rence entre <code>\tweak</code> et <code>\override</code></p>
<figure class="post__image align-center"><img loading="lazy"  src="https://myrealbook.vintherine.org/media/posts/18/PolyMarkDir3.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://myrealbook.vintherine.org/media/posts/18/responsive/PolyMarkDir3-xs.png 300w ,https://myrealbook.vintherine.org/media/posts/18/responsive/PolyMarkDir3-sm.png 480w ,https://myrealbook.vintherine.org/media/posts/18/responsive/PolyMarkDir3-md.png 768w"  alt="" width="507" height="104"></figure>
<p>En dÃ©finissant dans un layout des valeurs associÃ©es Ã  un identifiant</p>
<pre><code>\include "poly-mark-engraver.ly"<br><br>\score {</code><br><code>Â  \relative c'' {</code><br><code>Â  Â  c2 c Â c2 c</code><br><code>Â  Â  \polyMark #'DC "D.C. al Coda"</code><br><code>Â  Â  \bar ".."Â </code><br><code>Â  }</code><br><code>Â  \layout {</code><br><code>Â  Â  \context { \Score</code><br><code>Â  Â  Â  Â  Â  Â  Â  Â polyMarkOptions = #`((DC</code><br><code>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â (direction Â  Â  Â  Â . ,DOWN)</code><br><code>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â (self-alignment-X . ,RIGHT)</code><br><code>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â (break-visibility . ,begin-of-line-invisible)))</code><br><code>Â  } }</code><br><code>}</code></pre>
<figure class="post__image align-center"><img loading="lazy"  src="https://myrealbook.vintherine.org/media/posts/18/PolyMarkDir2.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://myrealbook.vintherine.org/media/posts/18/responsive/PolyMarkDir2-xs.png 300w ,https://myrealbook.vintherine.org/media/posts/18/responsive/PolyMarkDir2-sm.png 480w ,https://myrealbook.vintherine.org/media/posts/18/responsive/PolyMarkDir2-md.png 768w"  alt="" width="499" height="105"></figure>
<p>Enfin j'ai gardÃ© le meilleur pour la fin : il y a au sein du fichier poly-mark-engraver.ly une "<em>default-option-lists</em>" sur le modÃ¨le de polyMarkOptions et que l'on vient de voir et que l'on peut utiliser Ã  tous moments sans avoir Ã  les dÃ©clarer. Les identifiants parlent d'eux-mÃªmes et sont facile Ã  retenir : RightUp, RightDown, Right, CenterEndUp, CenterEndDown, CenterEnd, LeftUp, LeftDown, Left, CenterUp, CenterDown, Center, CenterEndBoth, CenterEndBothRotated, CenterEndBothMirrore. ComplÃ©tez-la avec des options que vous utilisez frÃ©quemment : pour ma part j'ai ajoutÃ© RighEnd et RightEndDown. voici quelques exemples :Â </p>
<pre><code>\include "poly-mark-engraver.ly"<br><br>\relative c'' {</code><br><code>Â  c1 Â </code><br><code>Â  \polyMark #'Right \markup \with-color #red \musicglyph "scripts.varsegno"</code><br><code>Â  \tweak extra-offset #'(1 . -4.5)</code><br><code>Â  \polyMark #'Left \default</code><br><code>Â  c</code><br><code>Â  \polyMark #'Right "RightUp"</code><br><code>Â  \polyMark #'LeftDown "LeftDown"</code><br><code>Â  c</code><br><code>Â  \polyMark #'CenterEndBothRotated \markup \musicglyph "scripts.ufermata" Â </code><br><code>Â  \bar ".."Â </code><br><code>}</code></pre>
<figure class="post__image align-center"><img loading="lazy"  src="https://myrealbook.vintherine.org/media/posts/18/PolyMarkDir4.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://myrealbook.vintherine.org/media/posts/18/responsive/PolyMarkDir4-xs.png 300w ,https://myrealbook.vintherine.org/media/posts/18/responsive/PolyMarkDir4-sm.png 480w ,https://myrealbook.vintherine.org/media/posts/18/responsive/PolyMarkDir4-md.png 768w"  alt="" width="505" height="109"></figure>
            ]]>
        </content>
    </entry>
    <entry>
        <title>Lilypond : indications rythmiques</title>
        <author>
            <name>Vincent</name>
        </author>
        <link href="https://myrealbook.vintherine.org/lilypond-indications-rythmiques.html"/>
        <id>https://myrealbook.vintherine.org/lilypond-indications-rythmiques.html</id>

        <updated>2022-07-01T10:40:57+02:00</updated>
            <summary>
                <![CDATA[
                    <p>Mise Ã  jour du 1er juillet 2022 : diminution de la taille des notes des indications rythmiques et non transposabilitÃ©. Voir en fin d'article.</p>
<p>Lylipond dispose d'une instruction pourÂ transformer les tÃªtes de notes en formes de "slashes". Cela indique ordinairement une section oÃ¹ le musicien est libre de jouer les notes qu'il veut Ã  condition de respecter le rythme. Par exemple :</p>
<p><img loading="lazy" src="http://lilypond.org/doc/v2.19/Documentation/3b/lily-25cb0b78.png" data-is-external-image="true"  alt="[image of music]" align="middle" border="0"></p>

                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                <p>Mise Ã  jour du 1er juillet 2022 : diminution de la taille des notes des indications rythmiques et non transposabilitÃ©. Voir en fin d'article.</p>
<p>Lylipond dispose d'une instruction pourÂ transformer les tÃªtes de notes en formes de "slashes". Cela indique ordinairement une section oÃ¹ le musicien est libre de jouer les notes qu'il veut Ã  condition de respecter le rythme. Par exemple :</p>
<p><img loading="lazy" src="http://lilypond.org/doc/v2.19/Documentation/3b/lily-25cb0b78.png" data-is-external-image="true"  alt="[image of music]" align="middle" border="0"></p>

<p>ce qui s'obtient par le code :</p>
<pre><code>\new Voice \with { \consists "Pitch_squash_engraver" }Â </code><br><code>\relative {Â </code><br><code>Â  e''8 e g a a16( bes) a8 gÂ </code><br><code>Â  \improvisationOn e8 ~ 2 ~ 8 f4 f8 ~ 2Â </code><br><code>Â  \improvisationOff a16( bes) a8 g eÂ </code><br><code>}</code></pre>
<p>La section est limitÃ©e par <code>\improvisationOn ../.. \improvisation\Off</code></p>
<p>Par ailleurs c'est le contexteÂ <code>\consists "Pitch_squash_engraver"</code> qui permet que toutes les notes s'affichent au centre de la portÃ©e. En son absence les notes s'afficheraient Ã  leur emplacement ordinaire.</p>
<p>Ce type de notation est frÃ©quemment utilisÃ© en jazz pour la mise en place de tout ou partie de la section rythmique, ici dans la voix basse :</p>
<figure class="post__image"><img loading="lazy"  src="https://myrealbook.vintherine.org/media/posts/5/729313fb13a2421f812e5632ae41638a.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://myrealbook.vintherine.org/media/posts/5/responsive/729313fb13a2421f812e5632ae41638a-xs.png 300w ,https://myrealbook.vintherine.org/media/posts/5/responsive/729313fb13a2421f812e5632ae41638a-sm.png 480w ,https://myrealbook.vintherine.org/media/posts/5/responsive/729313fb13a2421f812e5632ae41638a-md.png 768w"  alt="" width="1084" height="220"></figure>
<p>Le code :</p>
<pre><code>\version "2.22.1"</code><br><br><code>#(set-global-staff-size 18)</code><br><code>\include "jazzchords.ily"</code><br><code>\include "lilyjazz.ily"</code><br><code>\include "jazzextras.ily"</code><br><br><br><code>theNotes = \relative c'' {</code><br><code> \clef "treble" \key bes \major \time 4/4</code><br><code> \override Rest #'staff-position = #0</code><br><code> r2 r8 es c4-. | bes2 es | a g | es4-. r ^\markup \small "Solo break..." r2</code><br><code>}</code><br><br><code>Rythme= \relative c' {</code><br><code> \improvisationOn</code><br><code> \override NoteHead.no-ledgers = ##t % pas de lignes additionelles</code><br><code> \override Rest #'staff-position = #-6 % position des silences</code><br><code> c4. 8~ 4 4 | r4 8 r8 2 | 2 2 | s1 </code><br><code>}</code><br><br><code>harmonies = \chordmode {</code><br><code> f4.:8 bes:13 bes/as g:8 c2:8 f:8 bes:9-13 es:6.9</code><br><code>}</code><br><br><code>\score {</code><br><code> &lt;&lt;</code><br><code> \new ChordNames {</code><br><code> \set chordChanges = ##t</code><br><code> \harmonies</code><br><code> }</code><br><code> \new Staff &lt;&lt;</code><br><code> \theNotes \\ \Rythme</code><br><code> &gt;&gt; &gt;&gt;</code><br><code>}</code></pre>
<p>On notera :</p>
<ul>
<li>l'absence deÂ <code>\consists "Pitch_squash_engraver"</code> dans la voix rythmique et donc le positionnement des notes en fonction de leur valeur</li>
<li>le positionnement manuel des silences grÃ¢ce Ã  l'instruction <code>\override Rest #'staff-position</code>Â dans les deux voixÂ </li>
</ul>
<p>Pour passer la voix en haut changer la valeur de <code>Rest #'staff-position</code> dans Rythme ( par exemple #6) et inverser les 2 voixÂ <code class="inline-code">\Rythme \\ \theNotes</code></p>
<figure class="post__image"><img loading="lazy"  src="https://myrealbook.vintherine.org/media/posts/5/3303fb7dc05041ce9e95b34b60fe1aea.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://myrealbook.vintherine.org/media/posts/5/responsive/3303fb7dc05041ce9e95b34b60fe1aea-xs.png 300w ,https://myrealbook.vintherine.org/media/posts/5/responsive/3303fb7dc05041ce9e95b34b60fe1aea-sm.png 480w ,https://myrealbook.vintherine.org/media/posts/5/responsive/3303fb7dc05041ce9e95b34b60fe1aea-md.png 768w"  alt="" width="1529" height="191">Â </figure>
<p>Dans l'exemple qui suit la ligne de basse est totalement Ã©crite et seul le rythme est indiquÃ© pour le piano (ou la guitare). Les temps non significatifs sont remplacÃ©s par des slashes obtenus en remplacement les soupirs (voir la fonction <code>comp</code> dans le code ci-dessous)</p>
<figure class="post__image"><img loading="lazy"  src="https://myrealbook.vintherine.org/media/posts/5/8eca286f0b1e4b428d91a67f9ad15def.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://myrealbook.vintherine.org/media/posts/5/responsive/8eca286f0b1e4b428d91a67f9ad15def-xs.png 300w ,https://myrealbook.vintherine.org/media/posts/5/responsive/8eca286f0b1e4b428d91a67f9ad15def-sm.png 480w ,https://myrealbook.vintherine.org/media/posts/5/responsive/8eca286f0b1e4b428d91a67f9ad15def-md.png 768w"  alt="" width="1533" height="459"></figure>
<p>le code complet :</p>
<pre><code>\version "2.22.1"</code><br><br><code>#(set-global-staff-size 18)</code><br><code>\include "jazzchords.ily"</code><br><code>\include "lilyjazz.ily"</code><br><code>\include "jazzextras.ily"</code><br><br><code>comp = #(define-music-function (count) (integer?)</code><br><code>Â  Â  Â  Â  Â  #{</code><br><code>Â  Â  Â  Â  Â  Â  \override Rest.stencil = #ly:percent-repeat-item-interface::beat-slash</code><br><code>Â  Â  Â  Â  Â  Â  \override Rest.thickness = #0.48</code><br><code>Â  Â  Â  Â  Â  Â  \repeat unfold $count { r4 }</code><br><code>Â  Â  Â  Â  Â  Â  \revert Rest.stencil</code><br><code>Â  Â  Â  Â  Â  #}</code><br><code>Â  Â  Â  Â  Â  )</code><br><br><code>chordsRhythm = \relative c' {</code><br><code>Â  \override Rest #'staff-position = #8</code><br><code>Â  \improvisationOn \override NoteHead.no-ledgers = ##t</code><br><br><code>Â  \comp #3 e8 8~ | 4 \comp #3 | \comp #3 8 8~ | 4 \comp #3</code><br><code>Â  \comp #3 8 8~ | 4 8 8~ 4 \comp #3 r8 8 8 8~ | 4 \comp #3</code><br><code>}</code><br><br><code>Basse = \relative c {</code><br><code>Â  \override Rest #'staff-position = #0</code><br><code>Â  \clef "bass" \key as \major \time 4/4</code><br><code>Â  bes4 4 c8 4 des8~ | 2 r8 c f, c' | bes4 4 c8 4 des8~ | 4 r8 es16 e f c f,8 ~ 4 |</code><br><code>Â  bes4 4 c8 4 des8~ | 8 8 d es~ es4 g8 bes | as es as,4 8 g ges f8~ | 4. c'8 ges'4 f</code><br><code>}</code><br><br><code>harmonies = \chordmode {</code><br><code>Â  \set chordChanges = ##t</code><br><code>Â  bes2:m7 c4.:m7 des8:7+ s2 c:m7 bes2:m7 c4.:m7 des8:7+ s2 f:9+13-</code><br><code>Â  bes2:m7 c4.:m7 des8:7+ s2 es:7sus4 as:7+ s8 g:7 as:7/ges f:9- s1</code><br><code>}</code><br><br><code>\score {</code><br><code>Â  &lt;&lt;</code><br><code>Â  Â  \new ChordNames { \harmonies }</code><br><code>Â  Â  \new Staff \with {</code><br><code>Â  Â  Â  instrumentName = \markup {</code><br><code>Â  Â  Â  Â  \column { "rhythm"</code><br><code>Â  Â  Â  Â  Â  Â  Â  Â  Â  \line { "section" }</code><br><code>Â  Â  Â  Â  }</code><br><code>Â  Â  Â  }</code><br><code>Â  Â  }</code><br><code>Â  Â  &lt;&lt;</code><br><code>Â  Â  Â  \chordsRhythm \\ \Basse</code><br><code>Â  Â  &gt;&gt;</code><br><code>Â  &gt;&gt;</code><br><code>}</code><br><br></pre>
<hr>
<p>Mise Ã  jour du 1er juillet 2022</p>
<p>il est possible de changer la taille des notes de la partie indications rythmiques pour rendre la partition plus lisible. Pour ceci on utilisera la commande<code> \magnifyMusic x { }</code> ou x sera infÃ©rieur Ã  1 pour des notes plus petites ou supÃ©rieur pou des notes plus grosses. Dans l'exemple ci-dessous x vaut 0.8</p>
<figure class="post__image"><img loading="lazy"  src="https://myrealbook.vintherine.org/media/posts/5/document.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://myrealbook.vintherine.org/media/posts/5/responsive/document-xs.png 300w ,https://myrealbook.vintherine.org/media/posts/5/responsive/document-sm.png 480w ,https://myrealbook.vintherine.org/media/posts/5/responsive/document-md.png 768w"  alt="" width="497" height="135"></figure>
<p>On notera Ã©galement dans le code que la voix contient la propriÃ©tÃ© <code>\withMusicProperty untransposable ##t</code> Cela permet de ne pas changer la hauteur des notes rythmiques en cas de transposition de la partie.</p>
<p>Le code :</p>
<pre><code>\version "2.22.2"</code><br><code>\include "jazzchords.ily" % facultatif</code><br><code>\include "lilyjazz.ily"Â % facultatif</code><br>\score {<br>Â  &lt;&lt;<br>Â  Â  \new ChordNames {Â <br>Â  Â  Â  \chordmode { as1:m7 des:7 ges:7+ c:9+ } }<br>Â  Â  \relative c'' {Â <br>Â  Â  Â  \key des \major<br>Â  Â  Â  bes1 ~ | bes4. as8 r8 f4-. des8 |<br>Â  Â  Â  &lt;&lt; { \withMusicProperty untransposable ##t {<br>Â  Â  Â  Â  { \magnifyMusic 0.8 {<br>Â  Â  Â  Â  Â  \improvisationOnÂ <br>Â  Â  Â  Â  Â  \override NoteHead.no-ledgers = ##tÂ <br>Â  Â  Â  Â  Â  b'' 4. 8~4 4~ 1 } } } } \\ { es,,1 ~ | es1 }<br>Â  Â  Â  &gt;&gt;<br>Â  Â  }<br>Â  &gt;&gt;<br>}</pre>
            ]]>
        </content>
    </entry>
    <entry>
        <title>Indication de Swing</title>
        <author>
            <name>Vincent</name>
        </author>
        <link href="https://myrealbook.vintherine.org/indication-de-swing.html"/>
        <id>https://myrealbook.vintherine.org/indication-de-swing.html</id>

        <updated>2022-04-09T16:53:35+02:00</updated>
            <summary>
                <![CDATA[
                    <p>On trouve assez frÃ©quemment des indications de Swing sous la formeÂ </p>
<figure class="post__image"><img loading="lazy"  src="https://myrealbook.vintherine.org/media/posts/30//Swing.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://myrealbook.vintherine.org/media/posts/30//responsive/Swing-xs.png 300w ,https://myrealbook.vintherine.org/media/posts/30//responsive/Swing-sm.png 480w ,https://myrealbook.vintherine.org/media/posts/30//responsive/Swing-md.png 768w"  alt="Swing" width="373" height="131"></figure>
<p>Voyons comment faire ceci sous Lilypond. Une solution "simple" est de loger tout ceci dans un <code>\markup</code> que l'on utilisera soit dans l'entÃªte, ici dans <code>meter</code>, soit dans la musique elle-mÃªme.</p>

                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                <p>On trouve assez frÃ©quemment des indications de Swing sous la formeÂ </p>
<figure class="post__image"><img loading="lazy"  src="https://myrealbook.vintherine.org/media/posts/30//Swing.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://myrealbook.vintherine.org/media/posts/30//responsive/Swing-xs.png 300w ,https://myrealbook.vintherine.org/media/posts/30//responsive/Swing-sm.png 480w ,https://myrealbook.vintherine.org/media/posts/30//responsive/Swing-md.png 768w"  alt="Swing" width="373" height="131"></figure>
<p>Voyons comment faire ceci sous Lilypond. Une solution "simple" est de loger tout ceci dans un <code>\markup</code> que l'on utilisera soit dans l'entÃªte, ici dans <code>meter</code>, soit dans la musique elle-mÃªme.</p>

<p>Dans ce <code>\markup</code> nous allons inclure une partition (<code>\score</code>) et une portÃ©e (<code>\new Staff</code>) contenant les 2 croches et le triolet, sÃ©parÃ©s par un silence invisible affectÃ© d'une marque pour le signe Ã©gal.<br>Toutes les propriÃ©tÃ©s seront fixÃ©es dans le <code>\layout {}</code>Â </p>
<h5>La musique tient entiÃ¨rement dans une ligne de code :</h5>
<pre><code>\relative { a'8[ 8] s2^\markup " = " \tuplet 3/2 { 4 8 } }</code></pre>
<h5>Voyons ensuite le <code>\layout {}</code></h5>
<h6>Utilise le nom d'instrument pour la zone textuelle Swing</h6>
<pre><code>\set Staff.instrumentName = \markup \fontsize #2 Â Swing</code></pre>
<h6>Pas de clef, de mesure ni d'armure</h6>
<pre><code>\omit Staff.Clef<br>\omit Staff.TimeSignature<br>\omit Staff.KeySignature</code></pre>
<h6>Supprime les lignes de la portÃ©e et les barres de mesures</h6>
<pre><code>\override Staff.StaffSymbol.line-count = #0<br>\override Score.BarLine.break-visibility = ##(#f #f #f)</code></pre>
<h6>Diminue la taille de la police</h6>
<pre><code>\set Staff.fontSize = #-1</code></pre>
<h6>Diminue l'Ã©cartement entre les lignes de la portÃ©e</h6>
<p>Permet de diminuer la hauteur des hampes, fixÃ©e en fonction de Â l'Ã©cartement entre les lignes.</p>
<pre><code>\override Staff.StaffSymbol.staff-space = #(magstep -3)</code></pre>
<h6>Ajuste l'emplacement du <code>\markup</code> pour le signe =</h6>
<pre><code>\override Staff.TextScript #'extra-offset = #'( -0.7 . -1.8 )</code></pre>
<h6>DÃ©fini la taille de la portÃ©e</h6>
<p>Permet d'ajuster l'Ã©cart entre les notes</p>
<pre><code>line-width = #23</code></pre>
<h6>DÃ©fini l'indentation de la premiÃ¨re ligne de la portÃ©e</h6>
<p>Permet de fixer l'Ã©cart entre l'indication textuel (Swing) et les notes</p>
<pre><code>indent = #1</code></pre>
<h5>Tout le code :</h5>
<pre><code>\version "2.22.2"</code><br><br><code>\include "lilyjazz.ily" % facultatif</code><br><br><code>swingMark = \markup Â {</code><br><code>Â  \score {Â </code><br><code>  Â  \new Staff</code> <code>\relative { </code><code>a'8[ 8] </code>s2^\markup " = " \tuplet 3/2 { 4 8 } }<br><code>Â  Â  \layout {<br>Â  Â  Â  \set Staff.instrumentName = \markup \fontsize #2 Â Swing<br>Â  Â  Â  \omit Staff.Clef<br>Â  Â  Â  \omit Staff.TimeSignature<br>Â  Â  Â  \omit Staff.KeySignature<br>Â  Â  Â  \override Staff.StaffSymbol.line-count = #0<br>Â  Â  Â  \override Score.BarLine.break-visibility = ##(#f #f #f)<br>Â  Â  Â  \set Staff.fontSize = #-1<br>Â  Â  Â  \override Staff.StaffSymbol.staff-space = #(magstep -3)<br>Â  Â  Â  \override Staff.TextScript #'extra-offset = #'( -0.7 . -1.8 )<br>Â  Â  Â  line-width = #23<br>Â  Â  Â  indent = #1<br>Â  Â  }}</code><br><br><code>\header {</code><br><code>Â  meter = \swingMark</code><br><code>}</code><br><br><code>\repeat unfold 4 { c''1 }Â </code></pre>
            ]]>
        </content>
    </entry>
    <entry>
        <title>NumÃ©rotation des pages</title>
        <author>
            <name>Vincent</name>
        </author>
        <link href="https://myrealbook.vintherine.org/numerotation-des-pages.html"/>
        <id>https://myrealbook.vintherine.org/numerotation-des-pages.html</id>

        <updated>2022-03-15T14:25:33+01:00</updated>
            <summary>
                <![CDATA[
                    <p>Contrairement Ã  l'Ã©dition papier le nombre de page d'une Ã©dition numÃ©rique (lecture sur tablette par ex.) n'est pas immÃ©diatement visible. La maniÃ¨re la plus simple me paraÃ®t Ãªtre d'utiliser la numÃ©rotation des pages sous la forme x/n oÃ¹ x est le numÃ©ro de la page en cours et n le nombre total de pages. Cela n'est pas prÃ©vu par dÃ©faut par Lilypond mais peut se contourner de la maniÃ¨re suivante.</p>

                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                <p>Contrairement Ã  l'Ã©dition papier le nombre de page d'une Ã©dition numÃ©rique (lecture sur tablette par ex.) n'est pas immÃ©diatement visible. La maniÃ¨re la plus simple me paraÃ®t Ãªtre d'utiliser la numÃ©rotation des pages sous la forme x/n oÃ¹ x est le numÃ©ro de la page en cours et n le nombre total de pages. Cela n'est pas prÃ©vu par dÃ©faut par Lilypond mais peut se contourner de la maniÃ¨re suivante.</p>

<p><strong>Tout d'abord</strong> mettre un label Ã  la toute fin de la partition (<code>\label #'theLastPage</code> par exemple). C'est le seul moyen de connaitre le nombre total de pages (<code>\page-ref #'theLastPage</code>).</p>
<p><strong>Ensuite</strong> ajouter les lignes suivantes dans le bloc paper</p>
<pre><code> \paper {</code><br><code> oddHeaderMarkup = \markup {</code><br><code>Â  Â  \on-the-fly \print-page-number-check-first {</code><br><code>Â  Â  Â  \fill-line { \null \concat { \fromproperty #'page:page-number-string "/" \page-ref #'theLastPage "0" "?"} }</code><br><code>Â  } }</code><br><code>Â  evenHeaderMarkup = \markup {</code><br><code>Â  Â  \on-the-fly \print-page-number-check-first {</code><br><code>Â  Â  Â  \fill-line { \concat { \fromproperty #'page:page-number-string "/" \page-ref #'theLastPage "0" "?"} \null }</code><br><code>Â  } } }</code></pre>
<p>la condition <code>\on-the-fly \print-page-number-check-first</code> vÃ©rifie que impression du numÃ©ro de page doit se faire y compris pour la premiÃ¨re page, ce qui n'estÂ  pas l'option par dÃ©faut. <strong>Donc</strong> dans les books ou bookparts concernÃ©s rajouter</p>
<pre>Â  <code>\paper {</code><br><code>Â  Â print-first-page-number = ##t</code><br><code>Â  }</code></pre>
<figure class="post__image"><img loading="lazy"  src="https://myrealbook.vintherine.org/media/posts/29//BeginTheBeguine.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://myrealbook.vintherine.org/media/posts/29//responsive/BeginTheBeguine-xs.png 300w ,https://myrealbook.vintherine.org/media/posts/29//responsive/BeginTheBeguine-sm.png 480w ,https://myrealbook.vintherine.org/media/posts/29//responsive/BeginTheBeguine-md.png 768w"  alt="" width="543" height="209"></figure>
            ]]>
        </content>
    </entry>
    <entry>
        <title>Grille harmonique</title>
        <author>
            <name>Vincent</name>
        </author>
        <link href="https://myrealbook.vintherine.org/grille-harmonique.html"/>
        <id>https://myrealbook.vintherine.org/grille-harmonique.html</id>

        <updated>2022-03-25T10:52:54+01:00</updated>
            <summary>
                <![CDATA[
                    <p>La grille harmonique (voir sur <a title="https://fr.wikipedia.org/wiki/Grille_harmonique">WikipÃ©dia</a>) est paraÃ®t-il une spÃ©cificitÃ© du jazz franÃ§ais. Elle m'est souvent rÃ©clamÃ©e par la section rythmique qui la trouve plus facile Ã  lire qu'une ligne d'accords au dessus d'une portÃ©e.Â </p>
<p>Voici les divisions que j'utilise (mesures Ã  4 temps, les chiffres dans les case indiquant l'ordre de lecture)</p>
<figure class="post__image"><img loading="lazy"  src="https://myrealbook.vintherine.org/media/posts/28//ordreAccords-2.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://myrealbook.vintherine.org/media/posts/28//responsive/ordreAccords-2-xs.png 300w ,https://myrealbook.vintherine.org/media/posts/28//responsive/ordreAccords-2-sm.png 480w ,https://myrealbook.vintherine.org/media/posts/28//responsive/ordreAccords-2-md.png 768w"  alt="" width="792" height="202"></figure>
<p>Jusqu'Ã  ce jour le code Lilypond utilisÃ© pour produire ce genre de grille tenait franchement de la bidouille et il fallait souvent mettre les mains dans le cambouis pour produire un rÃ©sultat Ã  peu prÃ¨s prÃ©sentable. Je me suis donc dÃ©cidÃ© Ã  re-porter ce problÃ¨me sur la liste francophone des utilisateurs de Lilypond. <a title="https://lists.gnu.org/archive/html/lilypond-user-fr/2022-03/msg00014.html">Le fil de la discussion</a>.</p>
<p>Avec l'aide dÃ©cisive de Jean, notre dÃ©veloppeur en chef, je dispose enfin d'un code propre et lisible.</p>

                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                <p>La grille harmonique (voir sur <a title="https://fr.wikipedia.org/wiki/Grille_harmonique">WikipÃ©dia</a>) est paraÃ®t-il une spÃ©cificitÃ© du jazz franÃ§ais. Elle m'est souvent rÃ©clamÃ©e par la section rythmique qui la trouve plus facile Ã  lire qu'une ligne d'accords au dessus d'une portÃ©e.Â </p>
<p>Voici les divisions que j'utilise (mesures Ã  4 temps, les chiffres dans les case indiquant l'ordre de lecture)</p>
<figure class="post__image"><img loading="lazy"  src="https://myrealbook.vintherine.org/media/posts/28//ordreAccords-2.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://myrealbook.vintherine.org/media/posts/28//responsive/ordreAccords-2-xs.png 300w ,https://myrealbook.vintherine.org/media/posts/28//responsive/ordreAccords-2-sm.png 480w ,https://myrealbook.vintherine.org/media/posts/28//responsive/ordreAccords-2-md.png 768w"  alt="" width="792" height="202"></figure>
<p>Jusqu'Ã  ce jour le code Lilypond utilisÃ© pour produire ce genre de grille tenait franchement de la bidouille et il fallait souvent mettre les mains dans le cambouis pour produire un rÃ©sultat Ã  peu prÃ¨s prÃ©sentable. Je me suis donc dÃ©cidÃ© Ã  re-porter ce problÃ¨me sur la liste francophone des utilisateurs de Lilypond. <a title="https://lists.gnu.org/archive/html/lilypond-user-fr/2022-03/msg00014.html">Le fil de la discussion</a>.</p>
<p>Avec l'aide dÃ©cisive de Jean, notre dÃ©veloppeur en chef, je dispose enfin d'un code propre et lisible.</p>

<p>Voici un exemple minimal avec reprise alternative :</p>
<figure class="post__image"><img loading="lazy"  src="https://myrealbook.vintherine.org/media/posts/28//DemoChordGrid.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://myrealbook.vintherine.org/media/posts/28//responsive/DemoChordGrid-xs.png 300w ,https://myrealbook.vintherine.org/media/posts/28//responsive/DemoChordGrid-sm.png 480w ,https://myrealbook.vintherine.org/media/posts/28//responsive/DemoChordGrid-md.png 768w"  alt="" width="783" height="285"></figure>
<p>Tout d'abord il est nÃ©cessaire d'enregistrer et d'inclure la fonction codÃ©e par Jean, modifiÃ©e par mes soinsÂ  pour augmenter la taille des cases, tÃ©lÃ©chargeable <a href="https://acloud.zaclys.com/index.php/s/SJeiZD7oxbn8G62">depuis mon cloud</a>.Â </p>
<p>Pour l'inclure reportez vous <a href="https://lilypond.org/doc/v2.22/Documentation/notation/including-lilypond-files.html">Ã  cette page</a> ou, si vous utilisez Frescobaldi, sauvegardez le dans un rÃ©pertoire que vous aurez prÃ©alablement dÃ©signÃ© comme rÃ©pertoire d'inclusion. Voir <a href="https://frescobaldi.org/uguide.fr.html#help_preferences_lilypond">le manuel en ligne</a>.Â </p>
<p>La grille est dÃ©crite Ã  la maniÃ¨re d'un <a href="https://lilypond.org/doc/v2.22/Documentation/notation/chord-mode">chordmode</a> en intÃ©grant les sauts de ligne (<code>\break</code>) : mÃªme nombre de cases par ligne, en principe 4.Â  Jean s'est bien proposÃ© de coder un saut automatique mais d'une part cela ne fonctionne pas encore et d'autre part cela n'est pas bien pÃ©nible de saisir un <code>\break</code> manuellementÂ </p>
<p>Pour les reprises alternatives, comme vous pouvez le voir ci-dessus, l'idÃ©e est de faire une ligne reprÃ©sentant la 2Ã¨me alternative en n'affichant que la ou les mesure(s) diffÃ©renciÃ©e(s). Pour ne pas faire de cases vides on remplace les autres par des <code>s1 </code>(silences invisibles) et des <code>\bar ""</code> (barres invisibles) entourÃ©s d'un <code>\stopStaff </code>et d'un <code>\startStaff</code></p>
<p>Voici le code de l'exemple ci-dessus</p>
<pre><code>\version "2.22.2"</code><br><code>\include "jazzchords.ily"    % Si vous utilisez Lilyjazz</code><br><code>\include "lilyjazz.ily"Â  Â  Â  % Si vous utilisez Lilyjazz</code><br><code>\include "chord-grid-JAS.ly" % la fonction codÃ©e par Jean Abou-Samra</code><br><br><code>#(set-global-staff-size 18)</code><br><br><code>\paper {</code><br><code>Â  #(set-paper-size "a4")</code><br><code>Â  indent = 0</code><br><code>}</code><br><br><code>\layout {</code><br><code>Â  \context {</code><br><code>Â  Â  \Score</code><br><code>Â  Â  startRepeatType = #"[|:"</code><br><code>Â  Â  endRepeatType = #":|]"</code><br><code>Â  Â  doubleRepeatType = #":|][|:"</code><br><code>Â  Â }</code><br><code>}</code><br><br><code>mus = \chordmode {  <br>% la grille proprement dite, 1 ligne par case</code><br><code>  g1:m7+</code><br><code>Â  a2:m5-7 d:5+7</code><br><code>Â  a4:m5-7 d2.:5+7</code><br><code>Â  a2.:m5-7 d4:5+7</code><br><code>Â  \break</code><br><code>Â  a4:m5-7 d:5+7 g2:m7</code><br><code>Â  g2:m7+ a4:m5-7 d:5+7</code><br><code>Â  g4:m7+ e:m5-7 a:m5-7 d:5+7</code><br><code>Â  \set Score.repeatCommands = #'((volta "1.") )</code><br><code>Â  a2:m5-7 d:5+7</code><br><code>Â  \set Score.repeatCommands = #'((volta #f) end-repeat)</code><br><code>Â  \break</code><br><code>Â  \stopStaff s1 \bar "" s \bar "" s \startStaff</code><br><code>Â  \set Score.repeatCommands = #'((volta "2.") )</code><br><code>Â  g1:m6</code><br><code>Â  \set Score.repeatCommands = #'((volta #f))</code><br><code>Â  \bar ".."</code><br><code>}</code><br><br><code>\score {</code><br><code> \gridLayout  % layout enregistrÃ© dans le fichier inclus "chord-grid-JAS.ly"</code><br><code> \new ChordGrid \mus</code><br><code>}</code></pre>
            ]]>
        </content>
    </entry>
    <entry>
        <title>Reprises alternatives avec MuseScore</title>
        <author>
            <name>Vincent</name>
        </author>
        <link href="https://myrealbook.vintherine.org/reprises-alternatives-avec-musescore.html"/>
        <id>https://myrealbook.vintherine.org/reprises-alternatives-avec-musescore.html</id>

        <updated>2022-01-26T22:00:01+01:00</updated>
            <summary>
                <![CDATA[
                    <p>Il n'y a pas que Lilypond dans la vie, il y a aussi <a href="https://musescore.org/fr">MuseScore</a>. S'il se prÃ©sente Ã©galement comme Ã©diteur de partitions (wysiwyg celui-ci) je l'utilise pour ses capacitÃ© Ã  jouerÂ  les partitions avec son synthÃ©tiseur intÃ©grÃ© : c'est avec cet outil que je travaille Ã  mes compositions, arrangements, relevÃ©es ou bande d'accompagnement.Â Â </p>
<p>S'il est somme toute trÃ¨s simple Ã  prendre en main il y a quelques fonctionnalitÃ©s pas vraiment intuitives. C'est le cas des reprises lorsqu'une alternativeÂ  doit Ãªtre jouÃ©e plus de 2 fois. Par exemple :</p>
<figure class="post__image"><img loading="lazy"  src="https://myrealbook.vintherine.org/media/posts/27//2022-01-26-1643230195_3840x1080_scrot.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://myrealbook.vintherine.org/media/posts/27//responsive/2022-01-26-1643230195_3840x1080_scrot-xs.png 300w ,https://myrealbook.vintherine.org/media/posts/27//responsive/2022-01-26-1643230195_3840x1080_scrot-sm.png 480w ,https://myrealbook.vintherine.org/media/posts/27//responsive/2022-01-26-1643230195_3840x1080_scrot-md.png 768w"  alt="" width="583" height="465"></figure>

                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                <p>Il n'y a pas que Lilypond dans la vie, il y a aussi <a href="https://musescore.org/fr">MuseScore</a>. S'il se prÃ©sente Ã©galement comme Ã©diteur de partitions (wysiwyg celui-ci) je l'utilise pour ses capacitÃ© Ã  jouerÂ  les partitions avec son synthÃ©tiseur intÃ©grÃ© : c'est avec cet outil que je travaille Ã  mes compositions, arrangements, relevÃ©es ou bande d'accompagnement.Â Â </p>
<p>S'il est somme toute trÃ¨s simple Ã  prendre en main il y a quelques fonctionnalitÃ©s pas vraiment intuitives. C'est le cas des reprises lorsqu'une alternativeÂ  doit Ãªtre jouÃ©e plus de 2 fois. Par exemple :</p>
<figure class="post__image"><img loading="lazy"  src="https://myrealbook.vintherine.org/media/posts/27//2022-01-26-1643230195_3840x1080_scrot.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://myrealbook.vintherine.org/media/posts/27//responsive/2022-01-26-1643230195_3840x1080_scrot-xs.png 300w ,https://myrealbook.vintherine.org/media/posts/27//responsive/2022-01-26-1643230195_3840x1080_scrot-sm.png 480w ,https://myrealbook.vintherine.org/media/posts/27//responsive/2022-01-26-1643230195_3840x1080_scrot-md.png 768w"  alt="" width="583" height="465"></figure>

<p>Il faut :</p>
<ul>
<li>SÃ©lectionner la ligne alternative prÃ©cÃ©dant la barre de reprise (1.2.3)</li>
<li>Afficher l'inspecteur (touche de fonction F8 ou menu affichage)</li>
<li>Ã‰diter la zone texte de dÃ©but</li>
<li>Remplir tout en bas la liste des reprises qui doivent Ãªtre jouÃ©es</li>
<li>SÃ©lectionner la mesure prÃ©cÃ©dant la barre de reprise</li>
<li>Par le menu contextuel (bouton droit) Ã©diter les propriÃ©tÃ©s de la mesure</li>
<li>Dans nombres de lectures indiquer le nombre correspondant Ã  la liste des reprises +1</li>
</ul>
<p>Un bon dessin vaut mieux qu'un long discours ?</p>
<figure class="post__image"><img loading="lazy"  src="https://myrealbook.vintherine.org/media/posts/27//RepriseMS.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://myrealbook.vintherine.org/media/posts/27//responsive/RepriseMS-xs.png 300w ,https://myrealbook.vintherine.org/media/posts/27//responsive/RepriseMS-sm.png 480w ,https://myrealbook.vintherine.org/media/posts/27//responsive/RepriseMS-md.png 768w"  alt="" width="1092" height="658"></figure>
            ]]>
        </content>
    </entry>
    <entry>
        <title>Le principe de la moindre altÃ©ration</title>
        <author>
            <name>Vincent</name>
        </author>
        <link href="https://myrealbook.vintherine.org/le-principe-de-la-moindre-alteration.html"/>
        <id>https://myrealbook.vintherine.org/le-principe-de-la-moindre-alteration.html</id>

        <updated>2022-01-23T15:45:16+01:00</updated>
            <summary>
                <![CDATA[
                    <p>Une particularitÃ© de Lilypond est de pouvoir stocker des fragments musicaux dans des variables et de pouvoir les rÃ©utiliser oÃ¹ bon nous semble et comme bon nous semble. En les transposant notamment. Mais par dÃ©faut le rÃ©sultat n'est pas toujours lisible !</p>
<p>Pour les notes il suffitÂ  souvent d'un peu d'astuce. Par exemple si l'on veut transposer un Laâ™¯ d'une tierce mineure en dessous (transposer une partie de violon pour un saxophone alto) cela nous donnera un Fa<span class="wdg-select-all-ok">ğ„ª mais si on le transpose d'une seconde augmentÃ©e (1 ton Â½ Ã©galement) cela nous donnera un Sol. Voici ce que donne ce principe appliquÃ© Ã  la gamme de Si majeur (code ci-dessous)</span></p>
<figure class="post__image" ><img loading="lazy" src="https://myrealbook.vintherine.org/media/posts/26/document-3.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://myrealbook.vintherine.org/media/posts/26/responsive/document-3-xs.png 300w ,https://myrealbook.vintherine.org/media/posts/26/responsive/document-3-sm.png 480w ,https://myrealbook.vintherine.org/media/posts/26/responsive/document-3-md.png 768w"  alt="" width="570" height="300">
<figcaption >Transposition pour saxophones</figcaption>
</figure>
<p>Â </p>

                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                <p>Une particularitÃ© de Lilypond est de pouvoir stocker des fragments musicaux dans des variables et de pouvoir les rÃ©utiliser oÃ¹ bon nous semble et comme bon nous semble. En les transposant notamment. Mais par dÃ©faut le rÃ©sultat n'est pas toujours lisible !</p>
<p>Pour les notes il suffitÂ  souvent d'un peu d'astuce. Par exemple si l'on veut transposer un Laâ™¯ d'une tierce mineure en dessous (transposer une partie de violon pour un saxophone alto) cela nous donnera un Fa<span class="wdg-select-all-ok">ğ„ª mais si on le transpose d'une seconde augmentÃ©e (1 ton Â½ Ã©galement) cela nous donnera un Sol. Voici ce que donne ce principe appliquÃ© Ã  la gamme de Si majeur (code ci-dessous)</span></p>
<figure class="post__image" ><img loading="lazy" src="https://myrealbook.vintherine.org/media/posts/26/document-3.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://myrealbook.vintherine.org/media/posts/26/responsive/document-3-xs.png 300w ,https://myrealbook.vintherine.org/media/posts/26/responsive/document-3-sm.png 480w ,https://myrealbook.vintherine.org/media/posts/26/responsive/document-3-md.png 768w"  alt="" width="570" height="300">
<figcaption >Transposition pour saxophones</figcaption>
</figure>
<p>Â </p>

<pre>\version "2.22.1"<br><br>theNotes = \relative c' {Â <br>Â  \key b \major<br>Â  b4 cis dis e fis gis ais b~ | 1 }<br><br>\layout {<br>Â  indent = 5\cm<br>}<br><br>\score {<br>Â  &lt;&lt;<br>Â  Â  \new Staff \with {Â <br>Â  Â  Â  instrumentName = \markup {<br>Â  Â  Â  Â  \center-column { "Instruments"<br>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â \line { "en Do" } } } }<br>Â  Â  \theNotes<br>Â  Â  \new Staff \with {Â <br>Â  Â  Â  instrumentName = \markup {<br>Â  Â  Â  Â  \center-column { \line { "Instrument en Si" \smaller \flat }<br>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â \line { "\\transpose c d (1 ton)" } } } }<br>Â  Â  \transpose c d \theNotes<br>Â  Â  \new Staff \with {Â <br>Â  Â  Â  instrumentName = \markup {<br>Â  Â  Â  Â  \center-column { \line { "Instrument en Si" \smaller \flat }<br>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â \line { "\\transpose c eses (1 ton)" } } } }<br>Â  Â  \transpose c eses \theNotes<br>Â  Â  \new Staff \with {Â <br>Â  Â  Â  instrumentName = \markup {<br>Â  Â  Â  Â  \center-column { \line { "Instrument en Mi" \smaller \flat }<br>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â \line { "\\transpose c a (4 tons Â Â½)" } } } }<br>Â  Â  \transpose c a \theNotes<br>Â  Â  \new Staff \with {Â <br>Â  Â  Â  instrumentName = \markup {<br>Â  Â  Â  Â  \center-column { \line { "Instrument en Mi" \smaller \flat }<br>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â \line { "\\transpose c beses (4 tons Â Â½)" } } } }<br>Â  Â  \transpose c beses \theNotes<br>Â  &gt;&gt;<br>}</pre>
<p>Pour les accords le mÃªme problÃ¨me se pose mais est un petit peu plus compliquÃ© Ã  rÃ©soudre en utilisant la propriÃ©tÃ© chordRootNamer (voir code ci-dessous et <a href="https://lilypond.org/doc/v2.23/Documentation/notation/displaying-chords.fr.html">cette page de documentation</a>) . Ici ce n'est plus l'intervalle de transposition qui varie mais directement la base de l'accord via un double procÃ©dÃ© enharmonique. Merci encore Jean.</p>
<figure class="post__image" ><img loading="lazy" src="https://myrealbook.vintherine.org/media/posts/26/document-4.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://myrealbook.vintherine.org/media/posts/26/responsive/document-4-xs.png 300w ,https://myrealbook.vintherine.org/media/posts/26/responsive/document-4-sm.png 480w ,https://myrealbook.vintherine.org/media/posts/26/responsive/document-4-md.png 768w"  alt="" width="583" height="303">
<figcaption >Fm7 c'est plus intuitif que Eâ™¯m7 n'est-ce-pas ?</figcaption>
</figure>
<p>Â </p>
<pre>\version "2.22.1"<br><br>#(use-modules (ice-9 match))<br><br>#(define enharmonization<br>Â  Â #((0 . 0) ; Câ™®<br>Â  Â  Â  Â  Â  Â  Â (0 . 1/2) ; Dâ™­ â†’ C â™¯<br>Â  Â  Â  Â  Â  Â  Â (1 . 0) ; Dâ™®<br>Â  Â  Â  Â  Â  Â  Â (2 . -1/2) ; Dâ™¯ â†’ Eâ™­<br>Â  Â  Â  Â  Â  Â  Â (2 . 0) ; Eâ™®<br>Â  Â  Â  Â  Â  Â  Â (3 . 0) ; Fâ™®<br>Â  Â  Â  Â  Â  Â  Â (3 . -1/2) ; Gâ™­ â†’ Fâ™¯<br>Â  Â  Â  Â  Â  Â  Â (4 . 0) ; Gâ™®<br>Â  Â  Â  Â  Â  Â  Â #f ; Gâ™¯/Aâ™­<br>Â  Â  Â  Â  Â  Â  Â (5 . 0) ; Aâ™®<br>Â  Â  Â  Â  Â  Â  Â (6 . -1/2) ; Aâ™¯ â†’ Bâ™­<br>Â  Â  Â  Â  Â  Â  Â (6 . 0) ; Bâ™®<br>Â  Â  Â  Â  Â  Â  Â ))<br><br>#(define (enharmonize pitch)<br>Â  Â (let* ((semitones (ly:pitch-semitones pitch))<br>Â  Â  Â  Â  Â  (normalized-semitones (modulo semitones 12))<br>Â  Â  Â  Â  Â  (eventual-octave (* 1/12 (- semitones normalized-semitones))))<br>Â  Â  Â (match (vector-ref enharmonization normalized-semitones)<br>Â  Â  Â  Â  Â  Â  ((best-name . best-alteration)<br>Â  Â  Â  Â  Â  Â  Â (ly:make-pitch eventual-octave best-name best-alteration))<br>Â  Â  Â  Â  Â  Â  (#f<br>Â  Â  Â  Â  Â  Â  Â ;; Gâ™¯/Aâ™­<br>Â  Â  Â  Â  Â  Â  Â (if (positive? (ly:pitch-alteration pitch))<br>Â  Â  Â  Â  Â  Â  Â  Â  Â (ly:make-pitch eventual-octave 4 1/2)<br>Â  Â  Â  Â  Â  Â  Â  Â  Â (ly:make-pitch eventual-octave 5 -1/2))))))<br><br>%% Tests<br>#(for-each<br>Â  (match-lambda<br>Â  Â ((input output)<br>Â  Â  (let ((processed (enharmonize input)))<br>Â  Â  Â  (if (not (equal? output (enharmonize input)))<br>Â  Â  Â  Â  Â  (ly:error "~s -&gt; ~s: bad output, expected ~s" input processed output)))))<br>Â  `((,#{ c #} ,#{ c #})<br>Â  Â  (,#{ cis #} ,#{ cis #})<br>Â  Â  (,#{ des #} ,#{ cis #})<br>Â  Â  (,#{ des'' #} ,#{ cis'' #})<br>Â  Â  (,#{ bisis #} ,#{ cis' #})<br>Â  Â  (,#{ eeses #} ,#{ d #})<br>Â  Â  (,#{ gis,, #} ,#{ gis,, #})<br>Â  Â  (,#{ aes,, #} ,#{ aes,, #})<br>Â  Â  (,#{ fisis,, #} ,#{ g,, #})))<br><br>\layout {<br>Â  indent = 4\cm<br>}<br><br>theNotes = { \repeat unfold 6 { R1 } }<br>theChords = \chordmode { gis1:m7 cis:7 fis:7+ g:m7 c:7 f:7+}<br><br>\score {<br>Â  &lt;&lt;<br>Â  Â  \new ChordNames \theChords<br>Â  Â  \new Staff \with {Â <br>Â  Â  Â  instrumentName = \markup {<br>Â  Â  Â  Â  \center-column { "Instruments"<br>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â \line { "en Do" } } } }<br>Â  Â  \theNotes<br>Â  &gt;&gt;<br>}<br><br>\score {<br>Â  &lt;&lt;<br>Â  Â  \new ChordNames \transpose c a \theChords<br>Â  Â  \new Staff \with {Â <br>Â  Â  Â  instrumentName = \markup {<br>Â  Â  Â  Â  \center-column { \concat { "Pour inst. en Mi" \smaller \flat}<br>  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â \line { "sans enharmonisation" } } } }<br>Â  \theNotes<br>Â  &gt;&gt;<br>}Â <br><br>\score {<br>Â  &lt;&lt;<br>Â  Â  \new ChordNames \transpose c a \theChords<br>Â  Â  \new Staff \with {Â <br>Â  Â  Â  instrumentName = \markup {<br>Â  Â  Â  Â  \center-column { \concat { "Pour inst. en Mi" \smaller \flat}<br>  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â \line { "avec enharmonisation" } } } }Â <br>Â  Â  \theNotes<br>Â  &gt;&gt;<br>Â  \layout {<br>Â  Â  \context {<br>Â  Â  Â  \ChordNames<br>Â  Â  Â  chordRootNamer =<br>Â  Â  Â  #(lambda (pitch lowercase)<br>Â  Â  Â  Â  Â (note-name-&gt;markup (enharmonize pitch)<br>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  lowercase))<br>Â  Â  }<br>Â  }<br>}Â </pre>
            ]]>
        </content>
    </entry>
    <entry>
        <title>Fragments alternatifs : utilisation des tags</title>
        <author>
            <name>Vincent</name>
        </author>
        <link href="https://myrealbook.vintherine.org/fragments-alternatifs-utilisation-des-tags.html"/>
        <id>https://myrealbook.vintherine.org/fragments-alternatifs-utilisation-des-tags.html</id>

        <updated>2022-01-10T17:42:48+01:00</updated>
            <summary>
                <![CDATA[
                    <p>Dans les rÃ©pertoires de MyRealBook vous trouverezÂ  des partitions Ã©crites pour instruments en Do, en Siâ™­ et en Miâ™­. Du fait de leur faible tessiture (2,5 octaves) les saxophones me servent de rÃ©fÃ©rence pour les instruments transposÃ©s.</p>
<p>Les fichiers sources sont d'abord Ã©crits pour instruments en Do, les notes des diffÃ©rentes portÃ©es stockÃ©es dans des variables,Â  puis transposÃ©es. C'est en principe trÃ¨s simple : \transpose c dÂ  \maMusique pour instruments en Siâ™­, \transpose c a Â (ou a,) pour instruments en Miâ™­. Mais il arrive parfois que l'<a href="https://fr.wikipedia.org/wiki/Ambitus">ambitus</a> du morceau soit tel que la partitionÂ  transposÃ©e soit injouable.Â </p>
<p>Voici par exemple la premiÃ¨re partie deÂ  <em>Zebulon Dance</em> de Didier Lockwood Ã©crit originellement pour violon :</p>
<figure class="post__image"><img loading="lazy"  src="https://myrealbook.vintherine.org/media/posts/24/ZebulonDance-CTab.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://myrealbook.vintherine.org/media/posts/24/responsive/ZebulonDance-CTab-xs.png 300w ,https://myrealbook.vintherine.org/media/posts/24/responsive/ZebulonDance-CTab-sm.png 480w ,https://myrealbook.vintherine.org/media/posts/24/responsive/ZebulonDance-CTab-md.png 768w"  alt="Zebulon Dance" width="870" height="284"></figure>

                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                <p>Dans les rÃ©pertoires de MyRealBook vous trouverezÂ  des partitions Ã©crites pour instruments en Do, en Siâ™­ et en Miâ™­. Du fait de leur faible tessiture (2,5 octaves) les saxophones me servent de rÃ©fÃ©rence pour les instruments transposÃ©s.</p>
<p>Les fichiers sources sont d'abord Ã©crits pour instruments en Do, les notes des diffÃ©rentes portÃ©es stockÃ©es dans des variables,Â  puis transposÃ©es. C'est en principe trÃ¨s simple : \transpose c dÂ  \maMusique pour instruments en Siâ™­, \transpose c a Â (ou a,) pour instruments en Miâ™­. Mais il arrive parfois que l'<a href="https://fr.wikipedia.org/wiki/Ambitus">ambitus</a> du morceau soit tel que la partitionÂ  transposÃ©e soit injouable.Â </p>
<p>Voici par exemple la premiÃ¨re partie deÂ  <em>Zebulon Dance</em> de Didier Lockwood Ã©crit originellement pour violon :</p>
<figure class="post__image"><img loading="lazy"  src="https://myrealbook.vintherine.org/media/posts/24/ZebulonDance-CTab.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://myrealbook.vintherine.org/media/posts/24/responsive/ZebulonDance-CTab-xs.png 300w ,https://myrealbook.vintherine.org/media/posts/24/responsive/ZebulonDance-CTab-sm.png 480w ,https://myrealbook.vintherine.org/media/posts/24/responsive/ZebulonDance-CTab-md.png 768w"  alt="Zebulon Dance" width="870" height="284"></figure>

<p>L'ambitus couvre un peu de deux octaves, du La3 au Si5. <span style="color: var(--text-editor-body-color); font-family: var(--font-base); font-size: inherit; font-weight: var(--font-weight-normal);">L'ambitus transposÃ© pour un instrument en Siâ™­ (Si4 - Doâ™¯6) sera compatible avec un saxophone soprano ou jouÃ© une octave en dessous par un saxophone tÃ©nor.</span></p>
<p>Tentons maintenant de transposer pour un saxophone alto :</p>
<ol>
<li>avec \transpose c a l'ambitus sera Faâ™¯3 - Solâ™¯5 : trop bas ğŸ˜£</li>
<li>avec \transpose c a' l'ambitus sera Faâ™¯4 - Solâ™¯6 : trop haut ğŸ˜£</li>
</ol>
<p>La solution la plus Ã©vidente est de monter d'une octave les seules notes posant problÃ¨me (entourÃ©es de rouge ci-dessus). Pour Ã©viter la solution "<em>bestiale</em>" consistant Ã  dupliquer toute la portÃ©e pour ne changer que 7 notes on peut isoler les fragments alternatifs en utilisant des balises (tags). <a href="https://lilypond.org/doc/v2.22/Documentation/notation/different-editions-from-one-source#using-tags">La documentation est ici</a>.Â </p>
<p>Cette solution est d'autant plus facile dans notre cas qu'il suffit de changer lâ€™octave des fragments en question dans la commande \relative. Exemple de code pour les 3Â  mesures de la 1Ã¨re alternative</p>
<pre>maMusique = \relative c''<br>{<br>Â  \key a \major cis4 Â a8 Â e Â b' cis4 Â a8 ~ | a4 Â <br>Â  &lt;&lt;Â <br>Â  Â  \tag violon \relative b { b8 Â cis Â a2 Â }Â <br>Â  Â  \tag alto \relative b' { b8 Â cis Â a2 Â }<br>Â  &gt;&gt;<br>  r2 r8 Â e Â a Â cis \bar ":|."<br>}<br><br>&lt;&lt; Â \new Staff \with { instrumentName = "violon" } \keepWithTag violon \maMusique<br>  Â  \new Staff \with { instrumentName = "alto sax" } \keepWithTag alto \transpose c a, \maMusique <br>&gt;&gt;</pre>
<p>Le rÃ©sultat :</p>
<figure class="post__image"><img loading="lazy"  src="https://myrealbook.vintherine.org/media/posts/24/LilyBalises.png" sizes="(max-width: 48em) 100vw, 100vw" srcset="https://myrealbook.vintherine.org/media/posts/24/responsive/LilyBalises-xs.png 300w ,https://myrealbook.vintherine.org/media/posts/24/responsive/LilyBalises-sm.png 480w ,https://myrealbook.vintherine.org/media/posts/24/responsive/LilyBalises-md.png 768w"  alt="Lily balise" width="540" height="143"></figure>
            ]]>
        </content>
    </entry>
    <entry>
        <title>Lilypond et la pagination</title>
        <author>
            <name>Vincent</name>
        </author>
        <link href="https://myrealbook.vintherine.org/lilypond-et-la-pagination.html"/>
        <id>https://myrealbook.vintherine.org/lilypond-et-la-pagination.html</id>

        <updated>2022-01-04T11:12:10+01:00</updated>
            <summary>
                <![CDATA[
                    <p>Ã€ priori Lilypond permet de gÃ©rer finement la plupart des problÃ¨mes de pagination grÃ¢ce Ã  des variables dans les blocs <samp>\paper {}</samp></p>
<ul>
<li>afficher les numÃ©ros de pages (<samp>print-page-number = ##t</samp>, oui par dÃ©faut) ou non (<samp>##f</samp>)</li>
<li>afficher le numÃ©ro de la premiÃ¨re page (<samp>print-first page-number = ##f</samp>, non par dÃ©faut)</li>
<li>afficher les numÃ©ros en chiffres arabes (<samp>page-number-type = 'arabic</samp>,Â  par dÃ©faut),Â  romains minuscules ( <samp>'roman-lower</samp>) ou romains majuscules ( <samp>'roman-upper</samp>)</li>
<li>Changer le numÃ©ro de la premiÃ¨re page avec <samp>first-page-number</samp>. La valeur par dÃ©faut est de <samp>#1</samp>.</li>
</ul>

                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                <p>Ã€ priori Lilypond permet de gÃ©rer finement la plupart des problÃ¨mes de pagination grÃ¢ce Ã  des variables dans les blocs <samp>\paper {}</samp></p>
<ul>
<li>afficher les numÃ©ros de pages (<samp>print-page-number = ##t</samp>, oui par dÃ©faut) ou non (<samp>##f</samp>)</li>
<li>afficher le numÃ©ro de la premiÃ¨re page (<samp>print-first page-number = ##f</samp>, non par dÃ©faut)</li>
<li>afficher les numÃ©ros en chiffres arabes (<samp>page-number-type = 'arabic</samp>,Â  par dÃ©faut),Â  romains minuscules ( <samp>'roman-lower</samp>) ou romains majuscules ( <samp>'roman-upper</samp>)</li>
<li>Changer le numÃ©ro de la premiÃ¨re page avec <samp>first-page-number</samp>. La valeur par dÃ©faut est de <samp>#1</samp>.</li>
</ul>

<p>Une chose pourtant fait dÃ©faut malgrÃ© des demandes rÃ©pÃ©tÃ©es depuis de longues annÃ©es : ce paramÃ©trage ne fonctionne qu'au niveau du bloc <samp>\book</samp> et reste sans effet au niveau du bloc <samp>\bookpart</samp>. Voici au moins deux exemples pour lesquels cette limitation pose problÃ¨me :</p>
<ul>
<li>Au dÃ©but d'un ouvrage une prÃ©face ou une table des matiÃ¨re sera couramment numÃ©rotÃ©e en chiffres romains, la suite recommenÃ§ant Ã  1 en chiffres arabes.</li>
<li>Pour des partitions pour orchestre on aimerait que directeur et parties soient regroupÃ©es dans un mÃªme ouvrage mais que la numÃ©rotation de chaque partie dÃ©bute Ã  1.</li>
</ul>
<p>Il existe heureusement une solution de contournement que l'on doit initialement Ã  Thomas Morley (voir <a href="https://www.mail-archive.com/lilypond-user@gnu.org/msg115188.html">cette page des archives de la liste anglophone des utilisateurs de Lilypond</a>) et rÃ©cemment corrigÃ©e par Valentin Petzel sur la mÃªme liste.</p>
<p>Une remarque concernant l'exemple fourni avec le code repose sur la version 2.19 de Lilypond qu'il faut mettre Ã  jour avec convert-ly (modifications de <samp>\tocItem</samp>Â  qui nÃ©cessite un <samp>\markup</samp>)</p>
<p>Pour utiliser cette solution copiez tout d'abord dans votre code la fonction ci-dessous (Ã  la fin de cet article) ou collez-la dans un fichier Ã  inclure et insÃ©rez un bloc <samp>\paper {}</samp> Ã  l'intÃ©rieurÂ  des <samp>\bookpart</samp> avec les variables suivantes :</p>
<ul>
<li><samp>oddHeaderMarkup = \oddMarkup #'arabic</samp></li>
<li><samp>evenHeaderMarkup = \evenMarkup #'arabic</samp></li>
</ul>
<p>arabic peut Ãªtre remplacÃ© par roman-lower ou roman-upper</p>
<p>La variable <samp>print-first page-number</samp> est maintenant par dÃ©faut Ã  <samp>##t</samp> mais peut Ãªtre modifiÃ©e dans ce mÃªme bloc</p>
<p>Un exemple :</p>
<pre><code>\version "2.22.1"</code><br><code>\include "BookPartPagesNumber.ly"</code><br><br><code>musique = \relative c'' { \repeat unfold 2 { d1 \pageBreak } }</code><br><br><code>\book {</code><br><code>Â  \bookpart {</code><br><code>Â  Â  \paper {</code><br><code>  Â  Â  oddHeaderMarkup = \oddMarkup #'roman-lower</code><br><code>Â  Â  Â  evenHeaderMarkup = \evenMarkup #'roman-lower</code><br><code>Â  Â  }</code><br><code>Â  Â  \score {</code><br><code>Â  Â  Â  \musique</code><br><code>Â  Â  }</code><br><code>Â  }</code><br><code>Â  \bookpart {</code><br><code>Â  Â  \paper {</code><br><code>Â  Â  Â  print-first-page-number = ##f</code><br><code>Â  Â  Â  oddHeaderMarkup = \oddMarkup #'arabic</code><br><code>Â  Â  Â  evenHeaderMarkup = \evenMarkup #'arabic</code><br><code>Â  Â  }</code><br><code>Â  Â  \score {</code><br><code>Â  Â  Â  \musique</code><br><code>Â  Â  }</code><br><code>Â  Â  Â  Â  \score {</code><br><code>Â  Â  Â  \musique</code><br><code>Â  Â  }</code><br><code>Â  }</code><br><code>}</code></pre>
<p>La fonction BookPartPagesNumber</p>
<pre>\<code>version "2.22.1"</code><br><br><code>#(define part-first-pages '(0))</code><br><br><code>#(define (part-first-page? layout props)</code><br><code>Â  (= (chain-assoc-get 'page:page-number props -1)</code><br><code>Â  Â  Â (ly:output-def-lookup layout 'first-page-number)))</code><br><br><code>#(define (reset-part-first-page layout props arg)</code><br><code>"Returns page-number-string, starting every bookpart with page-number 0.</code><br><code>Relying on the extern defined `part-first-pages'.</code><br><code>"</code><br><code>Â  (set! props (prepend-alist-chain 'part-first-page '(0) props))</code><br><br><code>Â  (let* ((real-page-number (chain-assoc-get 'page:page-number props -1))</code><br><code>Â  Â  Â  Â  Â (parts-page-number (- real-page-number (car part-first-pages))))</code><br><br><code>Â  Â  (if (part-first-page? layout props)</code><br><code>Â  Â  Â  Â  (set! part-first-pages (cons (1- real-page-number) part-first-pages)))</code><br><br><code>Â  Â  (set! props</code><br><code>Â  Â  Â  (cons</code><br><code>Â  Â  Â  Â  (list</code><br><code>Â  Â  Â  Â  Â  (cons 'page:page-number-string (number-&gt;string parts-page-number))</code><br><code>Â  Â  Â  Â  Â  (cons 'page:page-number parts-page-number))</code><br><code>Â  Â  Â  Â  props))</code><br><code>Â  Â  (interpret-markup layout props arg)))</code><br><br><code>#(define ((print-part-first-page-as-one number-type) layout props arg)</code><br><br><code>Â  (set! props</code><br><code>Â  Â  (cons</code><br><code>Â  Â  Â  (list</code><br><code>Â  Â  Â  Â  (cons 'page:page-number-string</code><br><code>Â  Â  Â  Â  Â  Â  Â  (let ((page-number</code><br><code>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â (chain-assoc-get 'page:page-number props -1)))</code><br><code>Â  Â  Â  Â  Â  Â  Â  Â  ;(if (&lt;= page-number 0) ""</code><br><code>Â  Â  Â  Â  Â  Â  Â  Â  (cond ((and (eq? number-type 'roman-lower) (&gt; page-number 0))</code><br><code>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â (fancy-format #f "~(~@r~)" page-number))</code><br><code>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ((and (eq? number-type 'roman-upper) (&gt; page-number 0))</code><br><code>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â (fancy-format #f "~@r" page-number))</code><br><code>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ((eq? number-type 'arabic)</code><br><code>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â (number-&gt;string page-number))</code><br><code>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  (else (number-&gt;string page-number)))));)</code><br><code>Â  Â  Â  Â  (cons 'page:page-number</code><br><code>Â  Â  Â  Â  Â  Â  Â  (chain-assoc-get 'page:page-number props -1)))</code><br><code>Â  Â  Â  props))</code><br><code>Â  (interpret-markup layout props arg))</code><br><br><code>\paper {</code><br><code>  print-first-page-number = ##t</code><br><code>Â  oddMarkup =</code><br><code>Â  #(define-scheme-function (number-type)(symbol?)</code><br><code>Â  Â  #{</code><br><code>Â  Â  Â  \markup</code><br><code>Â  Â  Â  Â  \column {</code><br><code>Â  Â  Â  Â  Â  \fill-line {</code><br><code>Â  Â  Â  Â  Â  Â  " "</code><br><code>Â  Â  Â  Â  Â  Â  \on-the-fly #not-part-first-page \fromproperty #'header:instrument</code><br><code>Â  Â  Â  Â  Â  Â  Â  %% use in this order:</code><br><code>Â  Â  Â  Â  Â  Â  Â  \on-the-fly #reset-part-first-page</code><br><code>Â  Â  Â  Â  Â  Â  Â  \on-the-fly #(print-part-first-page-as-one number-type)</code><br><code>Â  Â  Â  Â  Â  Â  Â  \on-the-fly #print-page-number-check-first</code><br><code>Â  Â  Â  Â  Â  Â  Â  \fromproperty #'page:page-number-string</code><br><code>Â  Â  Â  Â  Â  }</code><br><code>  Â  Â  Â  }</code><br><code>Â  Â  #})</code><br><br><code>Â  evenMarkup =</code><br><code>Â  #(define-scheme-function (number-type)(symbol?)</code><br><code>Â  Â  #{</code><br><code>Â  Â  Â  \markup</code><br><code>Â  Â  Â  Â  \column {</code><br><code>Â  Â  Â  Â  Â  \fill-line {</code><br><code>Â  Â  Â  Â  Â  Â  Â  %% use in this order:</code><br><code>Â  Â  Â  Â  Â  Â  Â  \on-the-fly #reset-part-first-page</code><br><code>Â  Â  Â  Â  Â  Â  Â  \on-the-fly #(print-part-first-page-as-one number-type)</code><br><code>Â  Â  Â  Â  Â  Â  Â  \on-the-fly #print-page-number-check-first</code><br><code>Â  Â  Â  Â  Â  Â  Â  \fromproperty #'page:page-number-string</code><br><code>Â  Â  Â  Â  Â  Â  \on-the-fly #not-part-first-page \fromproperty #'header:instrument</code><br><code>Â  Â  Â  Â  Â  Â  " "</code><br><code>Â  Â  Â  Â  Â  }</code><br><code>  Â  Â  Â  }</code><br><code>  Â  #})</code><br><code>}</code></pre>
<p>Â </p>
            ]]>
        </content>
    </entry>
    <entry>
        <title>MyRealBook : les partitions</title>
        <author>
            <name>Vincent</name>
        </author>
        <link href="https://myrealbook.vintherine.org/myrealbook-les-partitions.html"/>
        <id>https://myrealbook.vintherine.org/myrealbook-les-partitions.html</id>

        <updated>2022-03-19T10:46:48+01:00</updated>
            <summary>
                <![CDATA[
                    Le tableau dynamique Ã  tri multicritÃ¨re [inadaptÃ© Ã  un ordiphone] Par ordre&hellip;
                ]]>
            </summary>
        <content type="html">
            <![CDATA[
                <ul>
<li><a href="scores/index.html">Le tableau dynamique Ã  tri multicritÃ¨re</a> [inadaptÃ© Ã  un ordiphone]</li>
<li><a href="scores/ByAlpha.html">Par ordre alphabÃ©tique des titres</a></li>
<li><a href="scores/ByComposers.html">Par ordre des compositeurs</a></li>
<li><a href="scores/ByStyles.html">Par styles (swing, bop, salsa etc.)</a></li>
<li><a href="scores/ByTempi.html">Par tempi (slow, medium, fast etc.)</a></li>
<li><a href="scores/Combos.html">Partitions pour combos ou petits big bands</a></li>
<li><a href="scores/Lyrics.html">Partitions contenant des paroles</a></li>
<li><a href="scores/Latest.html">Les 10 partitions les plus rÃ©centes</a></li>
</ul>
<p>Un petit rappel : MyRealBook est un site statique. Cela prÃ©sente de nombreux avantages (rapiditÃ©, sobriÃ©tÃ©...) mais le revers de la mÃ©daille est l'impossibilitÃ© de proposer des pages personnalisÃ©es. Ce qui constitue indÃ©niablement une limitation en matiÃ¨re de navigation et de recherche (*). Pour tenter d'y remÃ©dier voici ci-dessus plusieurs moyens dâ€™accÃ©der aux centaines de partitions que contient ce site.</p>
<p>(*) Il vous est toujours possible d'utiliser le module de recherche de votre navigateur au sein d'une mÃªme page.</p>
<h4><a href="scores/index.html">Ã€ propos du tableau dynamique Ã  tri multicritÃ¨re</a></h4>
<p>C'est sans doute la maniÃ¨re la plus <span class="tlf_csyntagme"><i>efficiente</i> de trouver ce que l'on recherche : il est possible de trier par titres (par dÃ©faut), par compositeurs, par styles, par tempi, par interprÃ¨tes et / ou par prÃ©sences ou non des paroles. Plusieurs tri successifs sont possibles.</span></p>
<p class="msg msg--highlight ">Mode d'emploi : Les flÃ¨ches dans les en-tÃªtes de colonnes permettent d'activer / dÃ©sactiver le tri du tableau. Un chiffre est ajoutÃ© Ã  droite du titre pour indiquer l'ordre du tri, une flÃ¨che rouge indique la direction du tri.</p>
<p>Principal dÃ©faut de ce tableau : il n'est pas "<em>Responsive design</em>", c'est Ã  dire qu'il ne se redimensionne pas en fonction des tailles d'Ã©cran. Il n'est donc pas adaptÃ© Ã  un ordiphone.</p>
<h4><a href="https://github.com/vgay/vgay.github.io">Cloner GitHub</a></h4>
<p>Ce site est sur GitHub, clonez-le avec toutes ses partitions ou tÃ©lÃ©chargez le .zip (cliquez sur le bouton vert "Code" puis sur le lien "Download ZIP")</p>
            ]]>
        </content>
    </entry>
</feed>
